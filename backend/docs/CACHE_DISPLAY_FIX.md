# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

## –ü—Ä–æ–±–ª–µ–º–∞

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–æ–±—â–∏–ª, —á—Ç–æ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö –∫–∞–ª–µ–Ω–¥–∞—Ä—è –∏ –¥–∏—Å–∫–∞ –Ω–∏—á–µ–≥–æ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è:
- `http://127.0.0.1:8000/google-oauth/calendar/` - –ø—É—Å—Ç–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- `http://127.0.0.1:8000/google-oauth/drive/` - –ø—É—Å—Ç–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞

## –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
```bash
curl -v http://localhost:8000/google-oauth/calendar/
# –†–µ–∑—É–ª—å—Ç–∞—Ç: HTTP/1.1 302 Found
# Location: /accounts/login/?next=/google-oauth/calendar/
```
**–í—ã–≤–æ–¥:** –°—Ç—Ä–∞–Ω–∏—Ü—ã —Ç—Ä–µ–±—É—é—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å OAuth
```python
from apps.google_oauth.models import GoogleOAuthAccount
accounts = GoogleOAuthAccount.objects.all()
# –†–µ–∑—É–ª—å—Ç–∞—Ç: [('andrei.golubenko', 'andrei.golubenko@softnetix.io')]
```
**–í—ã–≤–æ–¥:** –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `andrei.golubenko` –µ—Å—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–π Google OAuth –∞–∫–∫–∞—É–Ω—Ç.

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
```python
from apps.google_oauth.cache_service import GoogleAPICache
events = GoogleAPICache.get_calendar_events(3, 'primary', 100)
files = GoogleAPICache.get_drive_files(3, 100)
# –†–µ–∑—É–ª—å—Ç–∞—Ç: 100 —Å–æ–±—ã—Ç–∏–π –∏ 100 —Ñ–∞–π–ª–æ–≤ –≤ –∫—ç—à–µ
```
**–í—ã–≤–æ–¥:** –î–∞–Ω–Ω—ã–µ –µ—Å—Ç—å –≤ –∫—ç—à–µ.

### 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ views —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π
```python
from django.test import Client
client = Client()
client.force_login(user)
response = client.get('/google-oauth/calendar/')
# –†–µ–∑—É–ª—å—Ç–∞—Ç: Status 200, –Ω–æ –æ—à–∏–±–∫–∞ "name 'datetime' is not defined"
```

## –†–µ—à–µ–Ω–∏–µ

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∏–º–ø–æ—Ä—Ç–∞ datetime

**–û—à–∏–±–∫–∞:** `NameError: name 'datetime' is not defined`

**–ü—Ä–∏—á–∏–Ω–∞:** –í views –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–ª—Å—è —Ç–æ–ª—å–∫–æ `timedelta`, –Ω–æ –Ω–µ `datetime`.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```python
# –ë–´–õ–û:
from datetime import timedelta

# –°–¢–ê–õ–û:
from datetime import datetime, timedelta
```

**–§–∞–π–ª:** `backend/apps/google_oauth/views.py`

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –î—É–±–ª–∏—Ä—É—é—â–∏–µ –∏–º–ø–æ—Ä—Ç—ã

**–ü—Ä–æ–±–ª–µ–º–∞:** –í —Ñ—É–Ω–∫—Ü–∏—è—Ö –±—ã–ª–∏ –¥—É–±–ª–∏—Ä—É—é—â–∏–µ –∏–º–ø–æ—Ä—Ç—ã `datetime`.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –£–¥–∞–ª–µ–Ω—ã –¥—É–±–ª–∏—Ä—É—é—â–∏–µ –∏–º–ø–æ—Ä—Ç—ã –≤ —Ñ—É–Ω–∫—Ü–∏—è—Ö:
```python
# –£–¥–∞–ª–µ–Ω–æ –∏–∑ calendar_view:
from datetime import datetime, timedelta

# –£–¥–∞–ª–µ–Ω–æ –∏–∑ dashboard:
from datetime import datetime, timedelta
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### ‚úÖ –í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ä–∞–±–æ—Ç–∞—é—Ç
```bash
python manage.py test_views
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- **Dashboard:** ‚úÖ 200 - 99 —Å–æ–±—ã—Ç–∏–π, 100 —Ñ–∞–π–ª–æ–≤
- **Calendar:** ‚úÖ 200 - 100 —Å–æ–±—ã—Ç–∏–π
- **Drive:** ‚úÖ 200 - 100 —Ñ–∞–π–ª–æ–≤  
- **Sheets:** ‚úÖ 200 - 36 —Ç–∞–±–ª–∏—Ü

### ‚úÖ –ö—ç—à —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç
```bash
python manage.py cache_stats
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫—ç—à–∞ API –¥–∞–Ω–Ω—ã—Ö:
–í—Å–µ–≥–æ –∫–ª—é—á–µ–π: 4

üìã –ü–æ —Å–µ—Ä–≤–∏—Å–∞–º:
  google_calendar_events: 1 –∫–ª—é—á–µ–π
  google_drive_files: 2 –∫–ª—é—á–µ–π
  google_sheets: 1 –∫–ª—é—á–µ–π
```

### ‚úÖ –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ –∫—ç—à–∞
–í –ª–æ–≥–∞—Ö –≤–∏–¥–Ω–æ:
```
üì¶ –ü–æ–ª—É—á–µ–Ω—ã —Å–æ–±—ã—Ç–∏—è –∫–∞–ª–µ–Ω–¥–∞—Ä—è –∏–∑ –∫—ç—à–∞: 100 —Å–æ–±—ã—Ç–∏–π
üì¶ –ü–æ–ª—É—á–µ–Ω—ã —Ñ–∞–π–ª—ã Drive –∏–∑ –∫—ç—à–∞: 100 —Ñ–∞–π–ª–æ–≤
üì¶ –ü–æ–ª—É—á–µ–Ω—ã —Ç–∞–±–ª–∏—Ü—ã –∏–∑ –∫—ç—à–∞: 36 —Ç–∞–±–ª–∏—Ü
```

## –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ

### 1. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ `http://127.0.0.1:8000/accounts/login/`
- –õ–æ–≥–∏–Ω: `andrei.golubenko`
- –ü–∞—Ä–æ–ª—å: `test123`

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü
- **Dashboard:** `http://127.0.0.1:8000/google-oauth/`
- **Calendar:** `http://127.0.0.1:8000/google-oauth/calendar/`
- **Drive:** `http://127.0.0.1:8000/google-oauth/drive/`
- **Sheets:** `http://127.0.0.1:8000/google-oauth/sheets/`

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

### –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö
```
–ë—Ä–∞—É–∑–µ—Ä ‚Üí Django View ‚Üí API Service ‚Üí Cache Check ‚Üí Redis Cache ‚Üí Data Return ‚Üí Template
```

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- **Google Calendar Events:** 5 –º–∏–Ω—É—Ç
- **Google Drive Files:** 10 –º–∏–Ω—É—Ç  
- **Google Sheets:** 10 –º–∏–Ω—É—Ç

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
1. **API –¥–∞–Ω–Ω—ã–µ** –∏–∑ –∫—ç—à–∞
2. **–ü–∞—Ä—Å–∏–Ω–≥** –≤—Ä–µ–º–µ–Ω–∏ –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
3. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è** –ø–æ –¥–∞—Ç–∞–º –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º
4. **–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ** –≤ –æ–±—ä–µ–∫—Ç—ã-—Å–ª–æ–≤–∞—Ä–∏
5. **–ü–µ—Ä–µ–¥–∞—á–∞** –≤ —à–∞–±–ª–æ–Ω—ã

## –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫—ç—à–∞
```bash
python manage.py cache_stats
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ views
```bash
python manage.py test_views
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫—ç—à–∞
```bash
python manage.py test_cache
```

### –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞
```bash
python manage.py clear_cache --confirm
```

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –≤ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∏–º–ø–æ—Ä—Ç–∞ `datetime` –≤ views. –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

- ‚úÖ **–í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è:** –°—Ç–∞—Ç—É—Å 200
- ‚úÖ **–î–∞–Ω–Ω—ã–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è:** –°–æ–±—ã—Ç–∏—è, —Ñ–∞–π–ª—ã, —Ç–∞–±–ª–∏—Ü—ã
- ‚úÖ **–ö—ç—à —Ä–∞–±–æ—Ç–∞–µ—Ç:** –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ Redis
- ‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑ –∫—ç—à–∞

–¢–µ–ø–µ—Ä—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è –∏ —É–≤–∏–¥–µ—Ç—å –≤—Å–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö –∫–∞–ª–µ–Ω–¥–∞—Ä—è –∏ –¥–∏—Å–∫–∞! üéâ
