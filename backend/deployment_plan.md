# üöÄ –ü–ª–∞–Ω —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏

## üìã Pre-deployment (–¥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è)

### ‚úÖ –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–∞–±–æ—Ç—ã:
- [x] –°–æ–∑–¥–∞—Ç—å –ø–æ–ª–Ω—ã–π backup –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
- [x] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –Ω–∞ development
- [x] –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å rollback –ø–ª–∞–Ω
- [x] –£–≤–µ–¥–æ–º–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–∏

### üì¶ Backup —Å—Ç—Ä–∞—Ç–µ–≥–∏—è:
```bash
# 1. –°–æ–∑–¥–∞—Ç—å backup —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
cd /Users/agolubenko/hrhelper/fullstack/backend
cp -r . ../backend_backup_$(date +%Y%m%d_%H%M%S)

# 2. Backup –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
cp db.sqlite3 db.sqlite3.backup_$(date +%Y%m%d_%H%M%S)

# 3. Backup –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
cp config/settings.py config/settings.py.backup_$(date +%Y%m%d_%H%M%S)
```

### üß™ Staging —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ Django
python3 manage.py check --deploy

# 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–º–ø–æ—Ä—Ç–æ–≤
python3 -c "from logic.base.api_client import BaseAPIClient; print('‚úÖ –ò–º–ø–æ—Ä—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç')"

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ API endpoints
python3 manage.py runserver 8000 &
curl -s http://127.0.0.1:8000/api/v1/finance/grades/ | head -5
```

## üîÑ Deployment (—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ)

### üìã –ü–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:

#### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é:
- [ ] –í–∫–ª—é—á–∏—Ç—å maintenance mode
- [ ] –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
- [ ] –°–æ–∑–¥–∞—Ç—å —Ñ–∏–Ω–∞–ª—å–Ω—ã–π backup

#### 2. –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∫–æ–¥–∞:
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥ (—É–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ –≤ development)
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î (–µ—Å–ª–∏ –µ—Å—Ç—å)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

#### 3. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤:
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å health endpoints
- [ ] –í—ã–∫–ª—é—á–∏—Ç—å maintenance mode

### üõ†Ô∏è –ö–æ–º–∞–Ω–¥—ã —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:

```bash
# 1. –í–∫–ª—é—á–∏—Ç—å maintenance mode
echo "SYSTEM_MAINTENANCE=true" > .env.maintenance

# 2. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã
./stop_services.sh

# 3. Backup –ø–µ—Ä–µ–¥ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ–º
cp -r . ../backend_backup_pre_deployment_$(date +%Y%m%d_%H%M%S)

# 4. –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)
python3 manage.py migrate

# 5. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã
./start_services.sh

# 6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å health endpoints
curl -s http://127.0.0.1:8000/api/v1/health/ || echo "Health check failed"

# 7. –í—ã–∫–ª—é—á–∏—Ç—å maintenance mode
rm .env.maintenance
```

## üìä Post-deployment (–ø–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è)

### üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏:

#### –ü–µ—Ä–≤—ã–µ 30 –º–∏–Ω—É—Ç:
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –ª–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ API endpoints

#### –ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:
- [ ] Finance: —Å–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ salary ranges, benchmarks
- [ ] Vacancies: —Å–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–∞–∫–∞–Ω—Å–∏–π
- [ ] Huntflow: —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤
- [ ] Gemini: AI –∞–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö
- [ ] Google OAuth: –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Google —Å–µ—Ä–≤–∏—Å–∞–º–∏

#### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- [ ] –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ API < 500ms
- [ ] –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü < 2s
- [ ] –ü–∞–º—è—Ç—å < 512MB
- [ ] CPU < 50%

### üìà –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è:

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –Ω–∞ –æ—à–∏–±–∫–∏
grep -i "error\|exception\|traceback" logs/django.log | tail -20

# 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ API
curl -w "@curl-format.txt" -s http://127.0.0.1:8000/api/v1/finance/grades/

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
top -p $(pgrep -f "python.*manage.py")

# 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
python3 manage.py dbshell -c "SELECT COUNT(*) FROM django_migrations;"
```

## üîÑ Rollback –ø–ª–∞–Ω

### üö® –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫:

#### 1. –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–π rollback:
```bash
# 1. –í–∫–ª—é—á–∏—Ç—å maintenance mode
echo "SYSTEM_MAINTENANCE=true" > .env.maintenance

# 2. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã
./stop_services.sh

# 3. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ backup
rm -rf ./*
cp -r ../backend_backup_pre_deployment_*/.* ./
cp -r ../backend_backup_pre_deployment_*/* ./

# 4. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã
./start_services.sh

# 5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å
python3 manage.py check
```

#### 2. –ß–∞—Å—Ç–∏—á–Ω—ã–π rollback:
```bash
# –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Ç–æ–ª—å–∫–æ –≤ –æ–¥–Ω–æ–º –º–æ–¥—É–ª–µ
# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –º–æ–¥—É–ª—å –∏–∑ backup
cp ../backend_backup_pre_deployment_*/logic/problematic_module.py logic/
```

## üìû –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã

### üìß Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:
- **Pre-deployment**: "–ù–∞—á–∏–Ω–∞–µ–º —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –≤ 10:00"
- **Deployment start**: "–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞—á–∞–ª–æ—Å—å"
- **Deployment success**: "–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ"
- **Deployment failure**: "–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–∞–ª–µ–Ω–æ, –≤—ã–ø–æ–ª–Ω—è–µ–º rollback"

### üì± Slack —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:
- **#deployments**: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å—Ç–∞—Ç—É—Å–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
- **#alerts**: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –∏ rollback

## üéØ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

### ‚úÖ –í—Å–µ —ç—Ç–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–π—Ç–∏:

1. **Django check**: `python3 manage.py check --deploy` - 0 –æ—à–∏–±–æ–∫
2. **API endpoints**: –í—Å–µ endpoints –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
3. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ < 500ms
4. **–õ–æ–≥–∏**: –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö
5. **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**: –í—Å–µ –∫–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
6. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∞–∫—Ç–∏–≤–Ω–∞

### üö® –ö—Ä–∏—Ç–µ—Ä–∏–∏ –¥–ª—è rollback:

1. **Django –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è**
2. **API endpoints –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã**
3. **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –≤ –ª–æ–≥–∞—Ö**
4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–≥—Ä–∞–¥–∏—Ä–æ–≤–∞–ª–∞ > 50%**
5. **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Å–ª–æ–º–∞–Ω–∞**

## üìÖ –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–∞–º–∫–∏

### ‚è∞ –ü–ª–∞–Ω–∏—Ä—É–µ–º–æ–µ –≤—Ä–µ–º—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:
- **Pre-deployment**: 30 –º–∏–Ω—É—Ç
- **Deployment**: 15 –º–∏–Ω—É—Ç
- **Post-deployment monitoring**: 30 –º–∏–Ω—É—Ç
- **–û–±—â–µ–µ –≤—Ä–µ–º—è**: 75 –º–∏–Ω—É—Ç

### üïê –û–∫–Ω–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:
- **–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ –≤—Ä–µ–º—è**: 02:00 - 04:00 (–Ω–∏–∑–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞)
- **–†–µ–∑–µ—Ä–≤–Ω–æ–µ –≤—Ä–µ–º—è**: 14:00 - 16:00 (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
- **–ò–∑–±–µ–≥–∞—Ç—å**: 09:00 - 17:00 (—Ä–∞–±–æ—á–∏–µ —á–∞—Å—ã)

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### üõ°Ô∏è –ú–µ—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:
- [ ] –í—Å–µ backup'—ã –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω—ã
- [ ] –î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–µ—Ä–∞–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω
- [ ] –õ–æ–≥–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
- [ ] Rollback –ø–ª–∞–Ω –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω

### üîë –î–æ—Å—Ç—É–ø—ã:
- **Production —Å–µ—Ä–≤–µ—Ä**: –¢–æ–ª—å–∫–æ DevOps –∫–æ–º–∞–Ω–¥–∞
- **Staging —Å–µ—Ä–≤–µ—Ä**: DevOps + Lead Developer
- **Development**: –í—Å—è –∫–æ–º–∞–Ω–¥–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

## üìã Checklist —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

### Pre-deployment:
- [ ] Backup —Å–æ–∑–¥–∞–Ω
- [ ] Staging –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω
- [ ] Rollback –ø–ª–∞–Ω –≥–æ—Ç–æ–≤
- [ ] –ö–æ–º–∞–Ω–¥–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∞

### Deployment:
- [ ] Maintenance mode –≤–∫–ª—é—á–µ–Ω
- [ ] –°–µ—Ä–≤–∏—Å—ã –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- [ ] –ö–æ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω
- [ ] –ú–∏–≥—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
- [ ] –°–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—â–µ–Ω—ã
- [ ] Health checks –ø—Ä–æ–π–¥–µ–Ω—ã
- [ ] Maintenance mode –≤—ã–∫–ª—é—á–µ–Ω

### Post-deployment:
- [ ] –õ–æ–≥–∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã
- [ ] –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞
- [ ] –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞
- [ ] –ö–æ–º–∞–Ω–¥–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∞ –æ–± —É—Å–ø–µ—Ö–µ

## üéâ –£—Å–ø–µ—à–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:
1. ‚úÖ –û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥–µ
2. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
3. ‚úÖ –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞ 24 —á–∞—Å–∞
4. ‚úÖ –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –æ—Ç—á–µ—Ç –æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–∏
5. ‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è
