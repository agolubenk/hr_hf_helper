# Настройки поиска вакансий на hh.ru

## Описание

Модель `VacancySearchSettings` предназначена для хранения настроек поиска вакансий на сайте hh.ru. Позволяет гибко настраивать параметры поиска для различных категорий IT-специалистов.

## Структура модели

### Основные поля

- **name** - Название настройки поиска
- **locations** - JSON массив кодов локаций для поиска
- **specializations** - JSON массив ID специализаций hh.ru
- **keywords** - JSON массив ключевых слов для поиска
- **experience_level** - Уровень опыта (junior/middle/senior/lead)
- **employment_type** - Тип занятости (full/part/project/volunteer/probation)
- **schedule_type** - Тип графика (fullDay/shift/flexible/remote/flyInFlyOut)
- **only_with_salary** - Только вакансии с указанной зарплатой
- **salary_min_usd/salary_max_usd** - Диапазон зарплат в USD
- **is_active** - Активна ли настройка

### Коды локаций hh.ru

```python
HH_LOCATIONS = {
    "belarus": "16",      # Беларусь
    "minsk": "16.1",      # Минск
    "poland": "15",       # Польша
    "warsaw": "15.1",     # Варшава
    "krakow": "15.2",     # Краков
    "gdansk": "15.3",     # Гданьск
    "wroclaw": "15.4",    # Вроцлав
}
```

### ID специализаций hh.ru

```python
HH_SPECIALIZATIONS = {
    "programmer": "1.221",           # Программист, разработчик
    "designer": "1.89",              # Дизайнер, художник
    "devops": "1.274",               # DevOps-инженер
    "product_manager": "1.284",      # Менеджер продукта
    "project_manager": "1.283",      # Руководитель проектов
    "network_engineer": "1.276",     # Сетевой инженер
    "sysadmin": "1.275",             # Системный администратор
    "tech_support": "1.282",         # Специалист технической поддержки
    "tester": "1.273",               # Тестировщик
}
```

## Предустановленные настройки

### 1. IT-специалисты (Беларусь и Польша)
- **Локации**: Беларусь, Минск, Польша, Варшава, Краков, Гданьск, Вроцлав
- **Специализации**: Все IT-специализации
- **Уровень**: Middle
- **Ключевые слова**: 38 технологий и навыков

### 2. Все IT-специалисты (Беларусь и Польша)
- **Локации**: Только страны (Беларусь, Польша)
- **Специализации**: Все IT-специализации
- **Уровень**: Middle
- **Ключевые слова**: 38 технологий и навыков

### 3. Junior IT-специалисты
- **Локации**: Беларусь, Минск, Польша, Варшава
- **Специализации**: Программист, Дизайнер, Тестировщик
- **Уровень**: Junior
- **Ключевые слова**: Основные технологии + "junior", "стажер", "intern"

## API Endpoints

### Получить все настройки
```
GET /api/v1/finance/vacancy-search-settings/
```

### Получить активные настройки
```
GET /api/v1/finance/vacancy-search-settings/active/
```

### Создать новую настройку
```
POST /api/v1/finance/vacancy-search-settings/
```

### Обновить настройку
```
PUT /api/v1/finance/vacancy-search-settings/{id}/
```

## Использование в коде

```python
from apps.finance.models import VacancySearchSettings

# Получить активные настройки
active_settings = VacancySearchSettings.objects.filter(is_active=True)

# Получить параметры для поиска
for setting in active_settings:
    params = setting.get_search_params()
    print(f"Локации: {params['location_codes']}")
    print(f"Специализации: {params['specialization_ids']}")
    print(f"Ключевые слова: {params['keywords']}")
```

## Админка Django

Настройки доступны в админке Django по адресу `/admin/finance/vacancysearchsettings/`

### Поля в админке:
- Название и активность
- Локации и специализации (JSON поля)
- Ключевые слова (JSON поле)
- Параметры поиска (уровень опыта, тип занятости, график)
- Диапазон зарплат
- Информация о создании/обновлении

## Валидация

- Минимальная зарплата не может быть больше максимальной
- Должна быть указана хотя бы одна локация
- Должна быть указана хотя бы одна специализация

## Расширение

Для добавления новых локаций или специализаций:

1. Обновите константы в `hh_search_constants.py`
2. Создайте новую миграцию данных
3. Обновите документацию
