# üîÑ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ª–æ–≥–∏–Ω–∞

## ‚ùå **–ü—Ä–æ–±–ª–µ–º–∞**
–°—Ç—Ä–∞–Ω–∏—Ü–∞ `http://localhost:8000/telegram/?view=login` –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–ª–∞—Å—å –∏–∑-–∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –ø—Ä–æ–±–ª–µ–º —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π API endpoints.

## üîç **–ü—Ä–∏—á–∏–Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã**

### **1. –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏**
```javascript
// –ü—Ä–æ–±–ª–µ–º–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤ base.html
async function initTelegram() {
    const status = await telegramAPI.get('{% url "telegram:session_status" %}');
    if (status.active) {
        window.location.href = "{% url 'telegram:index' %}?view=main";
    } else {
        window.location.href = "{% url 'telegram:index' %}?view=login"; // ‚Üê –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª
    }
}
```

**–¶–∏–∫–ª –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏:**
1. –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è `login.html`
2. –í—ã–∑—ã–≤–∞–µ—Ç—Å—è `initTelegram()`
3. API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É (–Ω–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ Django)
4. –ü—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ `login.html`
5. –¶–∏–∫–ª –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ

### **2. –ü—Ä–æ–±–ª–µ–º–∞ —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π API**
```python
# –ü—Ä–æ–±–ª–µ–º–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è views.py
@method_decorator(login_required, name='dispatch')
class SessionStatusView(View):
    # –¢—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ Django –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –í—Å–µ API endpoints —Ç—Ä–µ–±–æ–≤–∞–ª–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ Django
- JavaScript –ø—ã—Ç–∞–ª—Å—è –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ API –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- Django –≤–æ–∑–≤—Ä–∞—â–∞–ª HTTP 302 —Ä–µ–¥–∏—Ä–µ–∫—Ç –≤–º–µ—Å—Ç–æ JSON –æ—Ç–≤–µ—Ç–∞

## ‚úÖ **–†–µ—à–µ–Ω–∏–µ**

### **1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏**

#### **–ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ –≤ `base.html`:**
```javascript
async function initTelegram() {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–∞—Ö–æ–¥–∏–º—Å—è –ª–∏ –º—ã —É–∂–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ª–æ–≥–∏–Ω–∞
    const currentUrl = window.location.href;
    const isLoginPage = currentUrl.includes('view=login') || currentUrl.endsWith('/telegram/');
    
    // –ï—Å–ª–∏ –º—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ª–æ–≥–∏–Ω–∞, –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å —Å–µ—Å—Å–∏–∏
    if (isLoginPage) {
        return; // ‚Üê –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª
    }
    
    try {
        const status = await telegramAPI.get('{% url "telegram:session_status" %}');
        // ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞
    } catch (error) {
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –±–µ–∑ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
    }
}
```

**–ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã** - –µ—Å–ª–∏ —É–∂–µ –Ω–∞ –ª–æ–≥–∏–Ω–µ, –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
- ‚úÖ **–ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ —Ü–∏–∫–ª–∞** - —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ª–æ–≥–∏–Ω–∞
- ‚úÖ **–£—Å–ª–æ–≤–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞** - –ø—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

### **2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è API**

#### **–ù–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è `SessionStatusView`:**
```python
class SessionStatusView(View):
    def get(self, request):
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ Django
        if not request.user.is_authenticated:
            return JsonResponse({
                'active': False, 
                'error': 'Not authenticated in Django',
                'requires_django_auth': True
            }, status=401)  # ‚Üê –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON –≤–º–µ—Å—Ç–æ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞
        
        # ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞
```

**–ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ **–£–±—Ä–∞–Ω `@login_required`** - endpoint –¥–æ—Å—Ç—É–ø–µ–Ω –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ Django
- ‚úÖ **–í–æ–∑–≤—Ä–∞—Ç JSON** - –≤–º–µ—Å—Ç–æ HTTP 302 —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞
- ‚úÖ **–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ –æ—à–∏–±–∫–∏** - —á–µ—Ç–∫–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ –ø—Ä–∏—á–∏–Ω—ã –æ—à–∏–±–∫–∏

### **3. –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ä—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞**

#### **–ù–æ–≤–∞—è –∫–Ω–æ–ø–∫–∞ –≤ `login.html`:**
```html
<button class="btn btn-outline-secondary" onclick="checkSessionStatus()">
    <i class="fas fa-check-circle me-2"></i>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
</button>
```

#### **–§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞:**
```javascript
async function checkSessionStatus() {
    try {
        showTelegramStatus('–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏...', 'info');
        const status = await telegramAPI.get('{% url "telegram:session_status" %}');
        
        if (status.active) {
            showTelegramStatus('–í—ã —É–∂–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã –≤ Telegram! –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —á–∞—Ç–∞–º...', 'success');
            setTimeout(() => {
                window.location.href = "{% url 'telegram:index' %}?view=main";
            }, 2000);
        } else {
            showTelegramStatus('–í—ã –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã –≤ Telegram. –í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤—ã—à–µ.', 'info');
        }
    } catch (error) {
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –æ—à–∏–±–æ–∫
        if (error.response?.status === 401) {
            const errorData = error.response?.data;
            if (errorData?.requires_django_auth) {
                showTelegramStatus('–í—ã –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã –≤ HR Helper. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É.', 'error');
            }
        }
    }
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ **–†—É—á–Ω–æ–π –∫–æ–Ω—Ç—Ä–æ–ª—å** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é
- ‚úÖ **–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è** - —á–µ—Ç–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏
- ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - —Ä–∞–∑–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –æ—à–∏–±–æ–∫

## üß™ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π**

### **1. –ü—Ä–æ–≤–µ—Ä–∫–∞ API endpoint:**
```bash
curl -s http://localhost:8000/telegram/session/status/
# –†–µ–∑—É–ª—å—Ç–∞—Ç: {"active": false, "error": "Not authenticated in Django", "requires_django_auth": true}
```

**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** HTTP 302 —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `/accounts/login/`
**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** JSON –æ—Ç–≤–µ—Ç —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± –æ—à–∏–±–∫–µ

### **2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ª–æ–≥–∏–Ω–∞:**
```bash
curl -s "http://localhost:8000/telegram/?view=login" | head -30
# –†–µ–∑—É–ª—å—Ç–∞—Ç: HTML —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –±–µ–∑ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
```

**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** –ë–µ—Å–∫–æ–Ω–µ—á–Ω–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞
**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** –°—Ç–∞–±–∏–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

### **3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏:**
- ‚úÖ **–°—Ç—Ä–∞–Ω–∏—Ü–∞ –ª–æ–≥–∏–Ω–∞** –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ **–ö–Ω–æ–ø–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞** —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ **API endpoints** –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç JSON –≤–º–µ—Å—Ç–æ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è** –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª

## üéØ **–†–µ–∑—É–ª—å—Ç–∞—Ç**

### **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**
- ‚úÖ **–ë–µ—Å–∫–æ–Ω–µ—á–Ω–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞** - —É—Å—Ç—Ä–∞–Ω–µ–Ω–∞
- ‚úÖ **API –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞
- ‚úÖ **–¶–∏–∫–ª –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏** - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω
- ‚úÖ **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç** - —É–ª—É—á—à–µ–Ω

### **–î–æ–±–∞–≤–ª–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- ‚úÖ **–†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞** - –Ω–æ–≤–∞—è –∫–Ω–æ–ø–∫–∞
- ‚úÖ **–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è** - —á–µ—Ç–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - —É–ª—É—á—à–µ–Ω–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### **–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é:**
- üéØ **–°—Ç—Ä–∞–Ω–∏—Ü–∞ –ª–æ–≥–∏–Ω–∞**: `http://localhost:8000/telegram/?view=login` - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
- üîß **API endpoints**: –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç JSON –æ—Ç–≤–µ—Ç—ã
- üì± **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –ø–æ–Ω—è—Ç–Ω—ã–π
- üöÄ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –±–µ–∑ –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã—Ö —Ü–∏–∫–ª–æ–≤

–¢–µ–ø–µ—Ä—å Telegram –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –±–µ–∑ –ø—Ä–æ–±–ª–µ–º —Å –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–æ–π! üéâ




