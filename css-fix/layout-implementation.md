# Инструкция по внедрению фиксированного header и sidebar

## 1. Добавить CSS стили

Добавить содержимое файла `fixed-layout.css` в конец файла `backend/static/css/hrhelper.css`

## 2. Заменить базовый шаблон

Заменить содержимое `backend/templates/common/base.html` на содержимое файла `updated-base.html`

## 3. Добавить JavaScript

Создать файл `backend/static/js/layout.js` с содержимым из файла `layout.js`

Затем добавить подключение этого скрипта в базовый шаблон (уже включено в updated-base.html):

```html
<!-- В updated-base.html уже есть встроенный JavaScript, 
     но можно также подключить отдельный файл: -->
<script src="{% static 'js/layout.js' %}"></script>
```

## 4. Структура получившегося layout

### Header (фиксированный сверху)
- Высота: 60px
- Содержит: заголовок страницы, действия, пользователь, переключатель темы
- Адаптивный: на мобильных появляется кнопка меню

### Sidebar (фиксированный слева)
- Ширина: 280px (на планшетах 250px)
- Содержит: логотип, навигационное меню, дополнительную информацию
- На мобильных: скрывается, показывается через overlay
- Прокручивается независимо если контент не помещается

### Main Content (прокручиваемый)
- Отступ сверху: 60px (под header)
- Отступ слева: 280px (от sidebar)
- На мобильных: отступ слева 0px
- Полностью прокручиваемый

## 5. Ключевые особенности

### Адаптивность
- **Десктоп (>768px)**: sidebar всегда видим, header фиксирован
- **Мобильные (≤768px)**: sidebar скрыт, открывается через кнопку меню с overlay

### Темы
- Автоматическое определение системной темы
- Сохранение выбора пользователя в localStorage
- Плавные переходы между темами

### UX улучшения
- Плавная анимация переключения темы
- Toast уведомления с автоскрытием
- Корректное поведение dropdown в header
- Закрытие мобильного меню по ESC или клику вне области

### Доступность
- Правильная табуляция и focus
- ARIA атрибуты для скринридеров
- Поддержка системных настроек пользователя

## 6. API для JavaScript

После внедрения будет доступен глобальный объект `window.HRHelper.Layout`:

```javascript
// Переключить sidebar
HRHelper.Layout.toggleSidebar();

// Установить заголовок страницы
HRHelper.Layout.setPageTitle('Новый заголовок');

// Показать уведомление
HRHelper.Layout.showNotification('Сообщение', 'success', 'Заголовок');
```

## 7. Проверка работы

После внедрения проверить:

1. **Desktop**: header и sidebar зафиксированы, контент прокручивается
2. **Mobile**: кнопка меню работает, overlay закрывается
3. **Темы**: переключатель работает, настройка сохраняется
4. **Уведомления**: toast показываются корректно
5. **Навигация**: активные пункты меню подсвечиваются

## 8. Возможные проблемы и решения

### Если sidebar не работает на мобильных:
```css
/* Убедитесь что z-index правильный */
.sidebar { z-index: 1040 !important; }
.sidebar-overlay { z-index: 1039 !important; }
```

### Если header перекрывает модальные окна:
```css
/* Bootstrap модали должны быть выше */
.modal { z-index: 1060 !important; }
```

### Если toast не показываются:
```javascript
// Проверьте что Bootstrap JS подключен
if (typeof bootstrap !== 'undefined') {
    console.log('Bootstrap загружен');
} else {
    console.error('Bootstrap не найден');
}
```

Всё готово! Теперь у тебя будет современный фиксированный layout с полной адаптивностью и поддержкой тем.